{
    "contents":[
        {
            "type":"section",
            "title":"Benchmark Execution Summary",
            "contents": [
                {
                    "type":"section",
                    "title":"Session",
                    "contents":[
                        {
                            "type":"itemize",
                            "ref":"reframe_json",
                            "items":[
                                "Hostname: @{session_info.hostname}@",
                                "User: @{session_info.hostname}@",
                                "Time Start: @{session_info.time_start}@",
                                "Time End: @{session_info.time_end}@"
                            ]
                        }
                    ]
                },
                {
                    "type":"section",
                    "title":"Cases",
                    "contents":[
                        {
                            "type":"itemize",
                            "ref":"reframe_json",
                            "items":[
                                "Total: @{session_info.num_cases}@ ",
                                "Failures: @{session_info.num_failures}@",
                                "Runs: @{runs | length}@"
                            ]
                        }
                    ]
                },
                {
                    "type":"section",
                    "title":"Parametrization",
                    "contents":[
                        {
                            "type":"table",
                            "ref": "parameter_table",
                            "layout":{
                                "column_order":["result","testcases.hashcode","tasks","mesh", "discretization", "testcases.time_total", "logs_link"],
                                "rename":{ "testcases.time_total":"Total Time (s)", "testcases.hashcode":"Hash", "result":"", "logs_link":"" }
                            },
                            "style":{
                                "column_align":{ "result":"center" },
                                "column_width":{ "result":1,"logs_link":1},
                                "classnames":["scrollable","sortable"]
                            },
                            "filter":{ "placeholder":"Filter testcases..." }
                        }
                    ]
                }
            ]
        },
        {
            "type":"section",
            "title":"I/O Performance Results",
            "contents":[
                {
                    "type": "text",
                    "text": "This section summarizes the performance of the Feel++ I/O pipeline, measuring mesh loading, function space creation, field saving, mesh saving, and exporter time."
                },

                {
                    "type":"section",
                    "title":"Aggregated Metrics",
                    "contents":[
                        //--------------RELATIVE PERFORMANCE OF EACH OPERATION------------------//
                        {
                            "type":"text",
                            "text": ""
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title":"Relative Performance of the pipline operations, averaged by discretization",
                                "plot_types":["stacked_bar"],
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "%" },
                                "color_axis":{
                                    "parameter":"perfvalue", "label":"Operation",
                                    "filter":[
                                        {"loadMesh": "Load mesh"}, {"saveMesh": "Save mesh"},
                                        {"functionSpace": "Function space (scalar)"}, {"functionSpaceV": "Function space (vector)"},
                                        {"saveField": "Save field"}, {"saveFieldV": "Save vector field"},
                                        {"export": "Exporter"}
                                    ]
                                },
                                "secondary_axis":"mesh",
                                "aggregations":[ {"column":"discretization","agg":"mean"} ]
                            }
                        },
                        //------------------------------------------------------------//
                        //--------------ABSOLUTE PERFORMANCE OF EACH OPERATION------------------//
                        {
                            "type":"text",
                            "text":""
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title":"Parallel Performance per operation (average)",
                                "plot_types":["scatter","grouped_bar","marked_scatter"],
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Mean execution time (s)" },
                                "color_axis":{
                                    "parameter":"perfvalue", "label":"Operation",
                                    "filter":[
                                        {"loadMesh": "Load mesh"}, {"saveMesh": "Save mesh"},
                                        {"functionSpace": "Function space (scalar)"}, {"functionSpaceV": "Function space (vector)"},
                                        {"saveField": "Save field"}, {"saveFieldV": "Save vector field"},
                                        {"export": "Exporter"}
                                    ]
                                },
                                "secondary_axis":{"parameter":"mesh","label":"Mesh"},
                                "aggregations":[ {"column":"discretization","agg":"mean"} ]
                            }
                        },
                        //------------------------------------------------------------//
                        //--------------SPEEDUP OF EACH OPERATION------------------//
                        {
                            "type":"text",
                            "text":""
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title":"Speedup per operation (average)",
                                "plot_types":["scatter"],
                                "transformation":"speedup",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Mean execution time (s)" },
                                "color_axis":{
                                    "parameter":"perfvalue", "label":"Operation",
                                    "filter":[
                                        {"loadMesh": "Load mesh"}, {"saveMesh": "Save mesh"},
                                        {"functionSpace": "Function space (scalar)"}, {"functionSpaceV": "Function space (vector)"},
                                        {"saveField": "Save field"}, {"saveFieldV": "Save vector field"},
                                        {"export": "Exporter"}
                                    ]
                                },
                                "secondary_axis":{"parameter":"mesh","label":"Mesh"},
                                "aggregations":[ {"column":"mesh","agg":"mean"} ]
                            }
                        }
                        //------------------------------------------------------------//
                    ]
                },



                {
                    "type":"section",
                    "title":"Performance Breakdown per operation",
                    "contents":[
                        {
                            "type":"plot",
                            "plot":{
                                "title":"Relative I/O performance per operation (P1 disc.)",
                                "plot_types": ["stacked_bar"],
                                "transformation":"relative_performance",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "color_axis": {
                                    "parameter": "perfvalue", "label": "Operation",
                                    "filter": [
                                        {"loadMesh": "Load mesh"}, {"saveMesh": "Save mesh"},
                                        {"functionSpace": "Function space (scalar)"}, {"functionSpaceV": "Function space (vector)"},
                                        {"saveField": "Save field"}, {"saveFieldV": "Save vector field"},
                                        {"export": "Exporter"}
                                    ] },
                                "secondary_axis":{"parameter":"mesh","label":"Mesh"},
                                "aggregations":[ {"column":"discretization","agg":"filter:P1"} ]
                            }
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title":"Relative I/O performance per operation (P2 disc.)",
                                "plot_types": [ "stacked_bar"],
                                "transformation":"relative_performance",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "color_axis": {
                                    "parameter": "perfvalue", "label": "Operation",
                                    "filter": [
                                        {"loadMesh": "Load mesh"}, {"saveMesh": "Save mesh"},
                                        {"functionSpace": "Function space (scalar)"}, {"functionSpaceV": "Function space (vector)"},
                                        {"saveField": "Save field"}, {"saveFieldV": "Save vector field"},
                                        {"export": "Exporter"}
                                ] },
                                "secondary_axis":{"parameter":"mesh","label":"Mesh"},
                                "aggregations":[ {"column":"discretization","agg":"filter:P2"} ]
                            }
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title":"Relative I/O performance per operation (P3 disc.)",
                                "plot_types": [ "stacked_bar"],
                                "transformation":"relative_performance",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "color_axis": {
                                    "parameter": "perfvalue", "label": "Operation",
                                    "filter": [
                                        {"loadMesh": "Load mesh"}, {"saveMesh": "Save mesh"},
                                        {"functionSpace": "Function space (scalar)"}, {"functionSpaceV": "Function space (vector)"},
                                        {"saveField": "Save field"}, {"saveFieldV": "Save vector field"},
                                        {"export": "Exporter"}
                                ] },
                                "secondary_axis":{"parameter":"mesh","label":"Mesh"},
                                "aggregations":[ {"column":"discretization","agg":"filter:P3"} ]
                            }
                        }
                    ]
                },

                {
                    "type": "section",
                    "title": "Observations and Notes",
                    "contents": [
                        {
                            "type": "text",
                            "text": ""
                        },
                        {
                            "type": "itemize",
                            "items": []
                        }
                    ]
                },

                {
                    "type":"section",
                    "title":"Operation : Export ",
                    "contents":[
                        {
                            "type":"plot",
                            "plot":{
                                "title": "Export",
                                "plot_types": [ "scatter","grouped_bar" ],
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                "aggregations":[ {"column":"perfvalue","agg":"filter:export"} ]
                            }
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title": "Export",
                                "plot_types": [ "scatter" ],
                                "transformation":"speedup",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                "aggregations":[ {"column":"perfvalue","agg":"filter:export"} ]
                            }
                        }
                    ]
                },
                {
                    "type":"section",
                    "title":"Operation : Load Mesh ",
                    "contents":[
                        {
                            "type":"plot",
                            "plot":{
                                "title": "Load Mesh",
                                "plot_types": [ "scatter","grouped_bar" ],
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                "aggregations":[ {"column":"perfvalue","agg":"filter:loadMesh"} ]
                            }
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title": "Load Mesh (speedup)",
                                "plot_types": [ "scatter" ],
                                "transformation":"speedup",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                "aggregations":[ {"column":"perfvalue","agg":"filter:loadMesh"} ]
                            }
                        }
                    ]
                },
                {
                    "type":"section",
                    "title":"Operation : Save Mesh ",
                    "contents":[
                        {
                            "type":"plot",
                            "plot":{
                                "title": "Save Mesh",
                                "plot_types": [ "scatter","grouped_bar" ],
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                "aggregations":[ {"column":"perfvalue","agg":"filter:saveMesh"} ]
                            }
                        },
                        {
                            "type":"plot",
                            "plot":{
                                "title": "Save Mesh (speedup)",
                                "plot_types": [ "scatter" ],
                                "transformation":"speedup",
                                "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                "yaxis": { "label": "Time [s]" },
                                "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                "aggregations":[ {"column":"perfvalue","agg":"filter:saveMesh"} ]
                            }
                        }
                    ]
                },
                {
                    "type":"section",
                    "title":"Operation : Function Space ",
                    "contents":[
                        {
                            "type":"section",
                            "title":"Function Space [Scalar]",
                            "contents":[
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Function Space Performance [Scalar]",
                                        "plot_types": [ "scatter","grouped_bar" ],
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:functionSpace"} ]
                                    }
                                },
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Function Space [Scalar] (speedup)",
                                        "plot_types": [ "scatter" ],
                                        "transformation":"speedup",
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:functionSpace"} ]
                                    }
                                }
                            ]
                        },
                        {
                            "type":"section",
                            "title":"Function Space [Vector]",
                            "contents":[
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Function Space Performance [Vector]",
                                        "plot_types": [ "scatter","grouped_bar" ],
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:functionSpaceV"} ]
                                    }
                                },
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Function Space [Vector] (speedup)",
                                        "plot_types": [ "scatter" ],
                                        "transformation":"speedup",
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:functionSpaceV"} ]
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "type":"section",
                    "title":"Operation : Save Field ",
                    "contents":[
                        {
                            "type":"section",
                            "title":"Save Field [Scalar]",
                            "contents":[
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Save Field Performance [Scalar]",
                                        "plot_types": [ "scatter","grouped_bar" ],
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:saveField"} ]
                                    }
                                },
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Save Field [Scalar] (speedup)",
                                        "plot_types": [ "scatter" ],
                                        "transformation":"speedup",
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:saveField"} ]
                                    }
                                }
                            ]
                        },
                        {
                            "type":"section",
                            "title":"Save Field [Vector]",
                            "contents":[
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Save Field Performance [Vector]",
                                        "plot_types": [ "scatter","grouped_bar" ],
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:saveFieldV"} ]
                                    }
                                },
                                {
                                    "type":"plot",
                                    "plot":{
                                        "title": "Save Field [Vector] (speedup)",
                                        "plot_types": [ "scatter" ],
                                        "transformation":"speedup",
                                        "xaxis": { "parameter": "tasks", "label": "Number of tasks" },
                                        "yaxis": { "label": "Time [s]" },
                                        "secondary_axis":{"parameter":"discretization","label":"Discretization"},
                                        "color_axis": { "parameter": "mesh", "label": "Mesh"},
                                        "aggregations":[ {"column":"perfvalue","agg":"filter:saveFieldV"} ]
                                    }
                                }
                            ]
                        }
                    ]
                }

            ]
        }
    ]
}